Metadata-Version: 2.4
Name: pr-auto-reviewer
Version: 0.1.0
Summary: Automatically fix code based on PR review comments
Requires-Python: >=3.9
Description-Content-Type: text/markdown
Requires-Dist: PyGithub>=2.1.1
Requires-Dist: anthropic>=0.40.0
Requires-Dist: google-cloud-aiplatform>=1.38.1
Requires-Dist: python-dotenv>=1.0.0
Requires-Dist: GitPython>=3.1.40
Requires-Dist: click>=8.1.7
Requires-Dist: rich>=13.7.0
Requires-Dist: questionary>=2.0.1

# PR Auto Reviewer

AI ê¸°ë°˜ GitHub Pull Request ìë™í™” ë„êµ¬

**ë‘ ê°€ì§€ ëª¨ë“œ ì§€ì›:**
- ğŸ¤– **Review Mode**: AIê°€ PR ì½”ë“œë¥¼ ë¶„ì„í•˜ê³  ë¦¬ë·° ëŒ“ê¸€ ì‘ì„±
- ğŸ”§ **Fix Mode**: ë¦¬ë·° ëŒ“ê¸€ì„ ì½ê³  ìë™ìœ¼ë¡œ ì½”ë“œ ìˆ˜ì • ë° ì»¤ë°‹/í‘¸ì‹œ

ğŸ“– **[ì•„í‚¤í…ì²˜ ë¬¸ì„œ](ARCHITECTURE.md)** - ìƒì„¸í•œ ì‹œìŠ¤í…œ êµ¬ì¡°ì™€ ë‹¤ì´ì–´ê·¸ë¨

---

## ğŸ“‹ ëª©ì°¨

- [ì£¼ìš” ê¸°ëŠ¥](#ì£¼ìš”-ê¸°ëŠ¥)
- [ë¹ ë¥¸ ì‹œì‘](#ë¹ ë¥¸-ì‹œì‘)
- [ì‚¬ìš©ë²•](#ì‚¬ìš©ë²•)
  - [Review Mode](#review-mode-aiê°€-pr-ë¦¬ë·°)
  - [Fix Mode](#fix-mode-ë¦¬ë·°-ëŒ“ê¸€-ìë™-ìˆ˜ì •)
- [ì„¤ì •](#ì„¤ì •)
- [ì§€ì› AI ëª¨ë¸](#ì§€ì›-ai-ëª¨ë¸)
- [í”„ë¡œì íŠ¸ êµ¬ì¡°](#í”„ë¡œì íŠ¸-êµ¬ì¡°)
- [íŠ¸ëŸ¬ë¸”ìŠˆíŒ…](#íŠ¸ëŸ¬ë¸”ìŠˆíŒ…)

---

## ì£¼ìš” ê¸°ëŠ¥

### ğŸ¤– Review Mode (ìƒˆë¡œìš´ ê¸°ëŠ¥!)
- PR ì½”ë“œ ë³€ê²½ì‚¬í•­ ìë™ ë¶„ì„
- ë²„ê·¸, ë³´ì•ˆ ì´ìŠˆ, ì½”ë“œ í’ˆì§ˆ ë¬¸ì œ íƒì§€
- GitHubì— ë¦¬ë·° ëŒ“ê¸€ ìë™ ì‘ì„±
- ì‹¬ê°ë„ë³„ ë¶„ë¥˜ (critical/important/suggestion)

### ğŸ”§ Fix Mode
- GitHub PR ë¦¬ë·° ëŒ“ê¸€ ìë™ ë¶„ì„
- AIë¥¼ ì‚¬ìš©í•œ ì½”ë“œ ìë™ ìˆ˜ì •
- Git ì»¤ë°‹ ë° í‘¸ì‹œ ìë™í™”
- ë¦¬ë·° ëŒ“ê¸€ì— ìë™ ë‹µë³€

### ğŸ¯ ì§€ì›í•˜ëŠ” AI ëª¨ë¸
- **Claude Code** (ê¶Œì¥) - API í‚¤ ë¶ˆí•„ìš”
- **Claude API** - Anthropic API ì§ì ‘ í˜¸ì¶œ
- **Gemini** - Google Cloud Vertex AI

---

## ë¹ ë¥¸ ì‹œì‘

### 1. ì„¤ì¹˜

```bash
cd pr-auto-reviewer

# uv ì„¤ì¹˜ (ì—†ëŠ” ê²½ìš°)
curl -LsSf https://astral.sh/uv/install.sh | sh

# ì˜ì¡´ì„± ì„¤ì¹˜
uv sync
```

### 2. ì¸ì¦ ì„¤ì •

**Claude Code ì‚¬ìš© (ê¶Œì¥)**
```bash
claude auth login
```

**í™˜ê²½ ë³€ìˆ˜ ì„¤ì •**
```bash
cp .env.example .env
# .env íŒŒì¼ì— GITHUB_TOKEN ì„¤ì • (í•„ìˆ˜)
```

### 3. ì‹¤í–‰

```bash
# AIê°€ PR ë¦¬ë·° ì‘ì„±
python main.py https://github.com/owner/repo/pull/123 --mode review

# ë¦¬ë·° ëŒ“ê¸€ ìë™ ìˆ˜ì •
python main.py https://github.com/owner/repo/pull/123 --mode fix
```

---

## ì‚¬ìš©ë²•

### Review Mode (AIê°€ PR ë¦¬ë·°)

AIê°€ PRì˜ ì½”ë“œ ë³€ê²½ì‚¬í•­ì„ ë¶„ì„í•˜ê³  ë¦¬ë·° ëŒ“ê¸€ì„ ì‘ì„±í•©ë‹ˆë‹¤.

#### ê¸°ë³¸ ì‚¬ìš©

```bash
python main.py <PR_URL> --mode review
```

#### ì˜ˆì‹œ

```bash
# PR ë¦¬ë·° ì‹¤í–‰
python main.py https://github.com/owner/repo/pull/123 --mode review

# Dry runìœ¼ë¡œ ë¨¼ì € í™•ì¸
python main.py https://github.com/owner/repo/pull/123 --mode review --dry-run

# íŠ¹ì • AI ëª¨ë¸ ì§€ì •
python main.py https://github.com/owner/repo/pull/123 --mode review --model claude-code
```

#### AIê°€ ê²€í† í•˜ëŠ” í•­ëª©

1. ğŸ› **ë²„ê·¸ ë° ì ì¬ì  ë¬¸ì œ**
2. âœ¨ **ì½”ë“œ í’ˆì§ˆ ê°œì„ ì‚¬í•­**
3. ğŸ“š **ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤ ìœ„ë°˜**
4. ğŸ”’ **ë³´ì•ˆ ì·¨ì•½ì **
5. âš¡ **ì„±ëŠ¥ ì´ìŠˆ**
6. ğŸ”§ **ìœ ì§€ë³´ìˆ˜ì„± ê°œì„ **

#### ì¶œë ¥ ì˜ˆì‹œ

```
AI Code Review Mode

Found 3 changed file(s)

Reviewing 1/3: src/main.py
âœ“ Found 2 suggestion(s)
  Line 45: Consider adding error handling for null values
  Line 67: This variable name could be more descriptive

Reviewing 2/3: tests/test_main.py
  No issues found

Reviewing 3/3: README.md
  No issues found

Posting review with 2 comment(s)...
âœ“ Review posted successfully!

Review Summary
Files Reviewed: 3
Comments Generated: 2
```

#### GitHubì— í‘œì‹œë˜ëŠ” ë¦¬ë·°

```markdown
## ğŸ¤– AI Code Review Summary

Reviewed 3 file(s) and found 2 suggestion(s).

Please review the inline comments for details.

*Automated review powered by AI*
```

---

### Fix Mode (ë¦¬ë·° ëŒ“ê¸€ ìë™ ìˆ˜ì •)

PRì— ë‹¬ë¦° ë¦¬ë·° ëŒ“ê¸€ì„ ì½ê³  ìë™ìœ¼ë¡œ ì½”ë“œë¥¼ ìˆ˜ì •í•©ë‹ˆë‹¤.

#### ê¸°ë³¸ ì‚¬ìš©

```bash
python main.py <PR_URL> --mode fix

# ë˜ëŠ” mode ìƒëµ (ê¸°ë³¸ê°’)
python main.py <PR_URL>
```

#### ì˜ˆì‹œ

```bash
# ë¦¬ë·° ëŒ“ê¸€ ìë™ ìˆ˜ì •
python main.py https://github.com/owner/repo/pull/123 --mode fix

# Dry runìœ¼ë¡œ ë¨¼ì € í™•ì¸
python main.py https://github.com/owner/repo/pull/123 --mode fix --dry-run

# ìë™ ëŒ“ê¸€ ë‹µë³€ ë¹„í™œì„±í™”
python main.py https://github.com/owner/repo/pull/123 --mode fix --no-auto-reply

# íŠ¹ì • ì €ì¥ì†Œ ê²½ë¡œ ì§€ì •
python main.py https://github.com/owner/repo/pull/123 --mode fix --repo-path /path/to/repo
```

#### ì›Œí¬í”Œë¡œìš°

1. PRì˜ ë¦¬ë·° ëŒ“ê¸€ ê°€ì ¸ì˜¤ê¸°
2. ê° ëŒ“ê¸€ ë¶„ì„ ë° ìˆ˜ì •ì‚¬í•­ ê²°ì •
3. ì½”ë“œ ìë™ ìˆ˜ì •
4. Git ì»¤ë°‹ ë° í‘¸ì‹œ
5. ë¦¬ë·° ëŒ“ê¸€ì— ë‹µë³€ ì‘ì„±

#### ì¶œë ¥ ì˜ˆì‹œ

```
Auto-Fix Mode

Found 3 review comment(s)

Comment 1/3
File: src/main.py
Line: 45
Comment: Please add error handling for null values
âœ“ Successfully applied fix
  Added try-catch block for null handling

Comment 2/3
File: src/utils.py
Line: 23
Comment: This function name is unclear
âœ“ Successfully applied fix
  Renamed function to be more descriptive

Committing and pushing changes...
âœ“ Committed and pushed changes
  Commit: a1b2c3d

Summary
Successful: 2
Failed: 0
Total: 2
```

---

### ğŸ”„ í†µí•© ì›Œí¬í”Œë¡œìš°

AI ë¦¬ë·°ì™€ ìë™ ìˆ˜ì •ì„ ì—°ê³„í•˜ì—¬ ì‚¬ìš©:

```bash
# 1ë‹¨ê³„: AIê°€ PR ë¦¬ë·° ì‘ì„±
python main.py https://github.com/owner/repo/pull/123 --mode review

# 2ë‹¨ê³„: AIê°€ ìê¸°ê°€ ë‹¨ ëŒ“ê¸€ì„ ë³´ê³  ìë™ ìˆ˜ì •
python main.py https://github.com/owner/repo/pull/123 --mode fix

# 3ë‹¨ê³„: ì™„ì„±! ğŸ‰
```

---

## ì„¤ì •

### í™˜ê²½ ë³€ìˆ˜ (.env)

`.env` íŒŒì¼ì„ ìƒì„±í•˜ê³  ë‹¤ìŒ ê°’ë“¤ì„ ì„¤ì •í•˜ì„¸ìš”:

```env
# í•„ìˆ˜: GitHub Personal Access Token
# ê¶Œí•œ: repo, write:discussion
GITHUB_TOKEN=your_github_token_here

# Claude API ì‚¬ìš© ì‹œì—ë§Œ í•„ìš”
ANTHROPIC_API_KEY=your_anthropic_api_key_here

# Gemini (Vertex AI) ì‚¬ìš© ì‹œì—ë§Œ í•„ìš”
VERTEX_AI_PROJECT_ID=your_gcp_project_id
VERTEX_AI_LOCATION=us-central1

# ê¸°ë³¸ ëª¨ë¸ ì„ íƒ (claude, claude-code, gemini)
DEFAULT_MODEL=claude-code
```

### GitHub Token ìƒì„±

1. GitHub Settings â†’ Developer settings â†’ Personal access tokens
2. Generate new token (classic)
3. í•„ìš”í•œ ê¶Œí•œ ì„ íƒ:
   - âœ… `repo` (ì „ì²´)
   - âœ… `write:discussion`

---

## ì§€ì› AI ëª¨ë¸

| ëª¨ë¸ | ì„¤ëª… | ì¸ì¦ ë°©ë²• | API í‚¤ í•„ìš” | ê¶Œì¥ |
|------|------|-----------|------------|------|
| **claude-code** | Claude Code CLI ì‚¬ìš© | `claude auth login` | âŒ ë¶ˆí•„ìš” | â­ ê¶Œì¥ |
| **claude** | Anthropic API ì§ì ‘ í˜¸ì¶œ | API í‚¤ | âœ… í•„ìš” | ì§ì ‘ ì œì–´ ì‹œ |
| **gemini** | Google Cloud Vertex AI | GCP ì¸ì¦ | âœ… í•„ìš” | GCP ì‚¬ìš©ì |

### ëª¨ë¸ë³„ ì„¤ì • ë°©ë²•

#### Claude Code (ê¶Œì¥)

```bash
# 1. Claude Code ì¸ì¦
claude auth login

# 2. ì‚¬ìš©
python main.py <PR_URL> --model claude-code
```

**ì¥ì :**
- API í‚¤ ê´€ë¦¬ ë¶ˆí•„ìš”
- ê°„í¸í•œ ì„¤ì •
- Claude Code ì‚¬ìš©ëŸ‰ì— í¬í•¨

#### Claude API

```bash
# 1. .env ì„¤ì •
ANTHROPIC_API_KEY=sk-ant-...

# 2. ì‚¬ìš©
python main.py <PR_URL> --model claude
```

#### Gemini (Vertex AI)

```bash
# 1. GCP ì¸ì¦
gcloud auth application-default login

# 2. .env ì„¤ì •
VERTEX_AI_PROJECT_ID=your-project-id

# 3. ì‚¬ìš©
python main.py <PR_URL> --model gemini
```

---

## í”„ë¡œì íŠ¸ êµ¬ì¡°

```
pr-auto-reviewer/
â”œâ”€â”€ main.py              # CLI ì—”íŠ¸ë¦¬í¬ì¸íŠ¸
â”œâ”€â”€ config.py            # ì„¤ì • ê´€ë¦¬
â”œâ”€â”€ github_client.py     # GitHub API í´ë¼ì´ì–¸íŠ¸
â”œâ”€â”€ code_reviewer.py     # ì½”ë“œ ë¦¬ë·° ë¡œì§ (Review Mode)
â”œâ”€â”€ code_modifier.py     # ì½”ë“œ ìˆ˜ì • ë¡œì§ (Fix Mode)
â”œâ”€â”€ git_ops.py          # Git ì‘ì—… ìë™í™”
â”œâ”€â”€ models/             # AI ëª¨ë¸ êµ¬í˜„
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ base.py         # ì¶”ìƒ ì¸í„°í˜ì´ìŠ¤
â”‚   â”œâ”€â”€ claude.py       # Claude API
â”‚   â”œâ”€â”€ claude_code.py  # Claude Code CLI
â”‚   â””â”€â”€ gemini.py       # Vertex AI
â”œâ”€â”€ pyproject.toml      # í”„ë¡œì íŠ¸ ì„¤ì •
â”œâ”€â”€ .env.example        # í™˜ê²½ ë³€ìˆ˜ í…œí”Œë¦¿
â”œâ”€â”€ .gitignore
â”œâ”€â”€ README.md
â””â”€â”€ ARCHITECTURE.md     # ì•„í‚¤í…ì²˜ ë¬¸ì„œ
```

---

## ëª…ë ¹ì–´ ì˜µì…˜

### ê³µí†µ ì˜µì…˜

```bash
--mode [review|fix]       # ëª¨ë“œ ì„ íƒ (ê¸°ë³¸: fix)
--model [claude-code|claude|gemini]  # AI ëª¨ë¸ ì„ íƒ
--dry-run                 # ì‹¤ì œ ë³€ê²½ ì—†ì´ í™•ì¸ë§Œ
```

### Fix Mode ì „ìš© ì˜µì…˜

```bash
--repo-path PATH         # ë¡œì»¬ ì €ì¥ì†Œ ê²½ë¡œ (ê¸°ë³¸: .)
--auto-reply            # ë¦¬ë·° ëŒ“ê¸€ ìë™ ë‹µë³€ (ê¸°ë³¸: true)
--no-auto-reply         # ìë™ ë‹µë³€ ë¹„í™œì„±í™”
```

### ì „ì²´ ì‚¬ìš© ì˜ˆì‹œ

```bash
# Review Mode
python main.py <PR_URL> --mode review --model claude-code
python main.py <PR_URL> --mode review --dry-run

# Fix Mode
python main.py <PR_URL> --mode fix --model claude-code
python main.py <PR_URL> --mode fix --repo-path /path/to/repo
python main.py <PR_URL> --mode fix --no-auto-reply
python main.py <PR_URL> --mode fix --dry-run

# ê¸°ë³¸ (Fix Mode, claude-code)
python main.py <PR_URL>
```

---

## ì£¼ì˜ì‚¬í•­

âš ï¸ **ì¤‘ìš”**
- GitHub í† í°ì€ `repo` ë° `write:discussion` ê¶Œí•œ í•„ìš”
- AIê°€ ìƒì„±í•œ ì½”ë“œëŠ” í•­ìƒ ê²€í†  ê¶Œì¥
- í”„ë¡œë•ì…˜ í™˜ê²½ ì‚¬ìš© ì „ í…ŒìŠ¤íŠ¸ ì €ì¥ì†Œì—ì„œ ë¨¼ì € ì‹œí—˜
- Review ModeëŠ” ë‹¹ì‹ ì˜ GitHub ê³„ì •ìœ¼ë¡œ ëŒ“ê¸€ ì‘ì„±

ğŸ’¡ **íŒ**
- `--dry-run`ìœ¼ë¡œ ë¨¼ì € í™•ì¸í•´ë³´ì„¸ìš”
- Review Modeë¡œ ì½”ë“œ í’ˆì§ˆ ì²´í¬ í›„ Fix Mode í™œìš©
- Claude Code ì‚¬ìš© ì‹œ API í‚¤ ê´€ë¦¬ ë¶ˆí•„ìš”

---

## íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### GitHub API ì—ëŸ¬

**ë¬¸ì œ:** `401 Unauthorized` ë˜ëŠ” ê¶Œí•œ ì—ëŸ¬

**í•´ê²°:**
```bash
# 1. GitHub í† í° í™•ì¸
echo $GITHUB_TOKEN  # ë˜ëŠ” .env íŒŒì¼ í™•ì¸

# 2. í† í° ê¶Œí•œ í™•ì¸
# GitHub Settings â†’ Developer settings â†’ Personal access tokens
# repo, write:discussion ê¶Œí•œ ìˆëŠ”ì§€ í™•ì¸
```

### Claude Code ì—ëŸ¬

**ë¬¸ì œ:** `Claude Code CLI not found`

**í•´ê²°:**
```bash
# Claude Code ì„¤ì¹˜ ë° ì¸ì¦
claude auth login
```

### Vertex AI ì¸ì¦ ì—ëŸ¬

**ë¬¸ì œ:** ì¸ì¦ ì‹¤íŒ¨

**í•´ê²°:**
```bash
# GCP ì¸ì¦
gcloud auth application-default login

# ë˜ëŠ” Service Account ì‚¬ìš©
export GOOGLE_APPLICATION_CREDENTIALS=/path/to/key.json

# Vertex AI API í™œì„±í™” í™•ì¸
gcloud services enable aiplatform.googleapis.com
```

### íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŒ (Fix Mode)

**ë¬¸ì œ:** `File not found` ì—ëŸ¬

**í•´ê²°:**
```bash
# 1. PR ë¸Œëœì¹˜ë¡œ ì²´í¬ì•„ì›ƒ
git checkout <branch-name>

# 2. ì €ì¥ì†Œ ê²½ë¡œ ì§€ì •
python main.py <PR_URL> --repo-path /path/to/repo
```

### ë¦¬ë·°ê°€ ì‘ì„±ë˜ì§€ ì•ŠìŒ (Review Mode)

**ë¬¸ì œ:** ë¦¬ë·° ëŒ“ê¸€ì´ GitHubì— í‘œì‹œë˜ì§€ ì•ŠìŒ

**í•´ê²°:**
- GitHub í† í°ì— `write:discussion` ê¶Œí•œ ìˆëŠ”ì§€ í™•ì¸
- PRì´ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸
- `--dry-run` ì˜µì…˜ ì œê±°í–ˆëŠ”ì§€ í™•ì¸

---

## FAQ

**Q: Review Modeì™€ Fix Modeë¥¼ í•¨ê»˜ ì‚¬ìš©í•  ìˆ˜ ìˆë‚˜ìš”?**
A: ë„¤! Review Modeë¡œ ë¨¼ì € ë¦¬ë·°í•œ í›„, Fix Modeë¡œ ìë™ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**Q: ì–´ë–¤ AI ëª¨ë¸ì´ ê°€ì¥ ì¢‹ë‚˜ìš”?**
A: Claude Codeë¥¼ ê¶Œì¥í•©ë‹ˆë‹¤. API í‚¤ ê´€ë¦¬ê°€ í•„ìš” ì—†ê³  ì„¤ì •ì´ ê°„ë‹¨í•©ë‹ˆë‹¤.

**Q: ë¦¬ë·° ëŒ“ê¸€ì€ ëˆ„êµ¬ ì´ë¦„ìœ¼ë¡œ ì‘ì„±ë˜ë‚˜ìš”?**
A: GITHUB_TOKEN ì†Œìœ ì(ë‹¹ì‹ )ì˜ ì´ë¦„ìœ¼ë¡œ ì‘ì„±ë©ë‹ˆë‹¤. "ğŸ¤– AI Code Review" í‘œì‹œë¡œ ìë™ ë¦¬ë·°ì„ì„ ëª…ì‹œí•©ë‹ˆë‹¤.

**Q: ë¹„ìš©ì´ ì–¼ë§ˆë‚˜ ë“œë‚˜ìš”?**
A: Claude CodeëŠ” Claude Code ì‚¬ìš©ëŸ‰ì— í¬í•¨ë©ë‹ˆë‹¤. Claude APIë‚˜ GeminiëŠ” ê° ì„œë¹„ìŠ¤ì˜ ìš”ê¸ˆì œì— ë”°ë¦…ë‹ˆë‹¤.

**Q: í”„ë¼ì´ë¹— ì €ì¥ì†Œì—ì„œë„ ì‘ë™í•˜ë‚˜ìš”?**
A: ë„¤, GitHub í† í°ì— í•´ë‹¹ ì €ì¥ì†Œ ì ‘ê·¼ ê¶Œí•œì´ ìˆìœ¼ë©´ ì‘ë™í•©ë‹ˆë‹¤.

---

## ë¼ì´ì„ ìŠ¤

MIT

---

## ê¸°ì—¬

ì´ìŠˆ ë° PR í™˜ì˜í•©ë‹ˆë‹¤!
